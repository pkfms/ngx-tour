{"version":3,"file":"ngx-tour-ng-bootstrap.js","sources":["../../../projects/ngx-tour-ng-bootstrap/src/lib/ng-bootstrap-tour.service.ts","../../../projects/ngx-tour-ng-bootstrap/src/lib/tour-step-template.service.ts","../../../projects/ngx-tour-ng-bootstrap/src/lib/tour-backdrop.service.ts","../../../projects/ngx-tour-ng-bootstrap/src/lib/tour-anchor.directive.ts","../../../projects/ngx-tour-ng-bootstrap/src/lib/tour-step-template.component.ts","../../../projects/ngx-tour-ng-bootstrap/src/lib/ng-bootstrap.module.ts","../../../projects/ngx-tour-ng-bootstrap/src/public_api.ts","../../../projects/ngx-tour-ng-bootstrap/src/ngx-tour-ng-bootstrap.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { TourService } from 'ngx-tour-core';\n\nimport { INgbStepOption } from './step-option.interface';\n\n@Injectable({\n    providedIn: 'root',\n  })\nexport class NgbTourService extends TourService<INgbStepOption> {}\n","import { Injectable, TemplateRef } from '@angular/core';\n\n@Injectable()\nexport class TourStepTemplateService {\n  public template: TemplateRef<{content: string}>;\n}\n","import { ElementRef, Injectable, RendererFactory2 } from '@angular/core';\nimport type { Renderer2 } from '@angular/core';\n\n@Injectable()\nexport class TourBackdropService {\n  private renderer: Renderer2;\n  private backdropElement: HTMLElement;\n\n  constructor(rendererFactory: RendererFactory2) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  public show(targetElement: ElementRef) {\n    const boundingRect = targetElement.nativeElement.getBoundingClientRect();\n\n    if (!this.backdropElement) {\n      this.backdropElement = this.renderer.createElement('div');\n      this.renderer.addClass(this.backdropElement, 'ngx-tour_backdrop');\n      this.renderer.appendChild(document.body, this.backdropElement);\n    }\n\n    this.setStyles(boundingRect, targetElement.nativeElement);\n  }\n\n  public close() {\n    if (this.backdropElement) {\n      this.renderer.removeChild(document.body, this.backdropElement);\n      this.backdropElement = null;\n    }\n  }\n\n  private setStyles(boundingRect: DOMRect, targetElement: HTMLElement) {\n    const borderRadius = getComputedStyle(targetElement).borderRadius;\n\n    const styles = {\n      position: 'fixed',\n      width: boundingRect.width + 'px',\n      height: boundingRect.height + 'px',\n      top: boundingRect.top + 'px',\n      left: boundingRect.left + 'px',\n      boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.7)',\n      zIndex: '100',\n      borderRadius: borderRadius\n    };\n\n    for (const name of Object.keys(styles)) {\n      this.renderer.setStyle(this.backdropElement, name, styles[name]);\n    }\n  }\n}\n","import { OnDestroy, AfterViewInit, Directive, ElementRef, Host, HostBinding, Inject, Input } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { ScrollDispatcher } from '@angular/cdk/scrolling';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { NgbPopover, Placement } from '@ng-bootstrap/ng-bootstrap';\nimport { TourAnchorDirective, TourState } from 'ngx-tour-core';\nimport { NgbTourService } from './ng-bootstrap-tour.service';\nimport { INgbStepOption } from './step-option.interface';\nimport { TourStepTemplateService } from './tour-step-template.service';\nimport { TourBackdropService } from './tour-backdrop.service';\n\n@Directive({ selector: '[tourAnchor]' })\nexport class TourAnchorNgBootstrapPopoverDirective extends NgbPopover { }\n\n@Directive({\n  selector: '[tourAnchor]',\n})\nexport class TourAnchorNgBootstrapDirective implements OnDestroy, AfterViewInit, TourAnchorDirective {\n  private tourWindowClass = 'ngx-tour-window';\n  private document: Document;\n  private step: INgbStepOption;\n\n  @Input() public tourAnchor: string;\n  @Input() public focusedElement: ElementRef<HTMLElement>;\n\n  @HostBinding('class.touranchor--is-active')\n  public isActive: boolean;\n\n  /* private get tourWindow(): HTMLElement {\n    return this.document.getElementsByClassName(this.tourWindowClass).item(0) as HTMLElement;\n  } */\n\n  constructor(\n    private element: ElementRef,\n    private scrollService: ScrollDispatcher,\n    private tourService: NgbTourService,\n    private tourStepTemplate: TourStepTemplateService,\n    private tourBackdrop: TourBackdropService,\n    @Host() private popoverDirective: TourAnchorNgBootstrapPopoverDirective,\n    @Inject(DOCUMENT) private doc?: any\n  ) {\n    this.document = doc;\n\n    this.popoverDirective.autoClose = false;\n    this.popoverDirective.triggers = '';\n    this.popoverDirective.popoverClass = this.tourWindowClass;\n    this.popoverDirective.toggle = () => { };\n  }\n\n  public ngAfterViewInit(): void {\n    this.tourService.register(this.tourAnchor, this);\n  }\n\n  public ngOnDestroy(): void {\n    this.tourService.unregister(this.tourAnchor);\n  }\n\n  public showTourStep(step: INgbStepOption): void {\n    this.step = step;\n    this.isActive = true;\n    this.popoverDirective.ngbPopover = this.tourStepTemplate.template;\n    this.popoverDirective.popoverTitle = step.title;\n    this.popoverDirective.container =  'body';\n    this.popoverDirective.placement = <Placement>(step.placement || 'top')\n      .replace('before', 'left').replace('after', 'right')\n      .replace('below', 'bottom').replace('above', 'top');\n    step.prevBtnTitle = step.prevBtnTitle || 'Prev';\n    step.nextBtnTitle = step.nextBtnTitle || 'Next';\n    step.endBtnTitle = step.endBtnTitle || 'End';\n\n    this.openTourWindow();\n    this.setBackdrop();\n  }\n\n  public hideTourStep(): void {\n    this.step = null;\n    this.isActive = false;\n    this.popoverDirective.close();\n    if (this.tourService.getStatus() === TourState.OFF) {\n      this.tourBackdrop.close();\n    }\n  }\n\n  /** Open the tour window with ngb-popover */\n  private openTourWindow(): void {\n    // Scroll the tour window into view after ngbPopover is opened\n    this.popoverDirective.shown.subscribe(() => {\n      if (!this.step.preventScrolling) {\n        (<HTMLElement>this.element.nativeElement).scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'center' });\n      }\n    });\n\n    this.popoverDirective.open({ step: this.step });\n  }\n\n  /** Set a backdrop that highlights the tour anchor element or a custom input element */\n  private setBackdrop(): void {\n    const targetElement = this.focusedElement || this.element;\n\n    if (this.step.enableBackdrop) {\n      this.tourBackdrop.show(targetElement);\n      // Adjust the backdrop position on scroll\n      this.scrollService.ancestorScrolled(this.element, 0).pipe(\n        takeUntil(this.tourService.stepHide$),\n        tap(() => this.tourBackdrop.show(targetElement))\n      ).subscribe();\n    } else {\n      this.tourBackdrop.close();\n    }\n  }\n}\n","import { TourHotkeyListenerComponent, IStepOption } from 'ngx-tour-core';\nimport { TourStepTemplateService } from './tour-step-template.service';\nimport {\n  Component,\n  TemplateRef,\n  ViewChild,\n  AfterContentInit,\n  ViewEncapsulation,\n  Input,\n  ContentChild\n} from '@angular/core';\nimport { NgbTourService } from './ng-bootstrap-tour.service';\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  selector: 'tour-step-template',\n  template: `\n    <ng-template #tourStep let-step=\"step\">\n      <p class=\"tour-step-content\">{{ step?.content }}</p>\n      <div class=\"tour-step-navigation\">\n        <button\n          *ngIf=\"tourService.hasPrev(step)\"\n          class=\"btn btn-sm btn-default\"\n          (click)=\"tourService.prev()\"\n        >\n          « {{ step?.prevBtnTitle }}\n        </button>\n        <button\n          *ngIf=\"tourService.hasNext(step)\"\n          class=\"btn btn-sm btn-default\"\n          (click)=\"tourService.next()\"\n        >\n          {{ step?.nextBtnTitle }} »\n        </button>\n        <button class=\"btn btn-sm btn-default\" (click)=\"tourService.end()\">\n          {{ step?.endBtnTitle }}\n        </button>\n      </div>\n    </ng-template>\n  `\n})\nexport class TourStepTemplateComponent extends TourHotkeyListenerComponent\n  implements AfterContentInit {\n  @ViewChild('tourStep', { read: TemplateRef, static: true })\n  public defaultTourStepTemplate: TemplateRef<any>;\n\n  @Input()\n  public stepTemplate: TemplateRef<{ step: IStepOption }>;\n\n  @ContentChild(TemplateRef)\n  public stepTemplateContent: TemplateRef<{ step: IStepOption }>;\n\n  constructor(\n    private tourStepTemplateService: TourStepTemplateService,\n    public tourService: NgbTourService\n  ) {\n    super(tourService);\n  }\n\n  public ngAfterContentInit(): void {\n    this.tourStepTemplateService.template =\n      this.stepTemplate ||\n      this.stepTemplateContent ||\n      this.defaultTourStepTemplate;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { NgbPopoverModule } from '@ng-bootstrap/ng-bootstrap';\nimport {TourService} from 'ngx-tour-core';\nimport { NgbTourService } from './ng-bootstrap-tour.service';\nimport { TourAnchorNgBootstrapDirective, TourAnchorNgBootstrapPopoverDirective } from './tour-anchor.directive';\nimport { TourBackdropService } from './tour-backdrop.service';\nimport { TourStepTemplateComponent } from './tour-step-template.component';\nimport { TourStepTemplateService } from './tour-step-template.service';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\nexport { TourAnchorNgBootstrapDirective, TourAnchorNgBootstrapPopoverDirective, TourStepTemplateComponent, NgbTourService };\n\n@NgModule({\n  declarations: [TourAnchorNgBootstrapDirective, TourAnchorNgBootstrapPopoverDirective, TourStepTemplateComponent],\n  exports: [TourAnchorNgBootstrapDirective, TourAnchorNgBootstrapPopoverDirective, TourStepTemplateComponent],\n  imports: [CommonModule, NgbPopoverModule, ScrollingModule],\n})\nexport class TourNgBootstrapModule {\n  public static forRoot(): ModuleWithProviders<TourNgBootstrapModule> {\n    return {\n      ngModule: TourNgBootstrapModule,\n      providers: [\n        TourStepTemplateService,\n        TourBackdropService,\n        TourService,\n        NgbTourService\n      ],\n    };\n  }\n}\n","/*\n * Public API Surface of ngx-tour-ng-bootstrap\n */\n\nexport { INgbStepOption as IStepOption } from './lib/step-option.interface';\nexport { NgbTourService as TourService } from './lib/ng-bootstrap-tour.service';\nexport {\n  TourNgBootstrapModule,\n  TourAnchorNgBootstrapDirective,\n  TourStepTemplateComponent\n} from './lib/ng-bootstrap.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {NgbTourService as ɵa} from './lib/ng-bootstrap-tour.service';\nexport {TourAnchorNgBootstrapPopoverDirective as ɵb} from './lib/tour-anchor.directive';\nexport {TourBackdropService as ɵd} from './lib/tour-backdrop.service';\nexport {TourStepTemplateService as ɵc} from './lib/tour-step-template.service';"],"names":[],"mappings":"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"}